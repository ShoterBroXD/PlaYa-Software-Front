<div class="config-layout">
    <!---<nav class="sidebar">
        <ul>
            <li><span>Perfil principal</span></li>
            <li><span>Eventos</span></li>
            <li><span>Comunidades</span></li>
            <li><span>Estadísticas</span></li>
            <li class="active"><span>Configuración ⚙️</span></li>
            <li><span>Cerrar Sesión</span></li>
        </ul>
    </nav>-->

    <main class="main-content">
        <h1>Configuración</h1>
        <section class="perfil">
            <div class="avatar"></div>
            <div class="datos-perfil">
                <input type="text" placeholder="Nombre de usuario" [(ngModel)]="usuario" />
                <input type="email" placeholder="Correo de Usuario" [(ngModel)]="correo" />
                <button class="btn btn-password" (click)="cambiarPassword()">Cambiar Contraseña</button>
            </div>
            <textarea placeholder="Biografía" [(ngModel)]="biografia"></textarea>
        </section>

        <section class="settings">
            <div class="preferences">
                <h3>Preferencia de Reproducción</h3>
                <label>
                    Calidad de Audio
                    <select [(ngModel)]="calidadAudio">
                        <option>Baja</option>
                        <option>Media</option>
                        <option>Alta</option>
                    </select>
                </label>
                <label>
                    Descargar con WiFi
                    <input type="checkbox" [(ngModel)]="descargarWiFi" />
                </label>
                <label>
                    Modo de Ahorro de Datos
                    <input type="checkbox" [(ngModel)]="ahorroDatos" />
                </label>

                <label class="master-switch-label">
                    <h3>Notificaciones</h3>
                    <label class="switch">
                        <input type="checkbox" [(ngModel)]="notificacionesActivas" (change)="toggleAllNotifications()" />
                        <span class="slider"></span>
                    </label>
                </label>
                <label class="switch-label">
                    <span>Nuevas canciones de artistas seguidos</span>
                    <label class="switch">
                        <input type="checkbox" [(ngModel)]="notifNuevasCanciones" />
                        <span class="slider"></span>
                    </label>
                </label>
                <label class="switch-label">
                    <span>Mensajes / Comentarios</span>
                    <label class="switch">
                        <input type="checkbox" [(ngModel)]="notifMensajes" />
                        <span class="slider"></span>
                    </label>
                </label>
                <label class="switch-label">
                    <span>Recordatorio de lanzamientos</span>
                    <label class="switch">
                        <input type="checkbox" [(ngModel)]="notifRecordatorios" />
                        <span class="slider"></span>
                    </label>
                </label>
                <label class="switch-label">
                    <span>Recomendaciones personalizadas</span>
                    <label class="switch">
                        <input type="checkbox" [(ngModel)]="notifRecomendaciones" />
                        <span class="slider"></span>
                    </label>
                </label>
            </div>

            <div class="account">
                <h3>Cuenta</h3>
                <label>
                    Tipo de cuenta
                    <select [(ngModel)]="tipoCuenta">
                        <option>Oyente</option>
                        <option>Artista</option>
                    </select>
                </label>
                <div class="button-row">
                    <button class="btn">Vincular redes sociales</button>
                    <button class="btn-preferences" (click)="openMusicPreferences()">
                        <i class="fas fa-sliders-h"></i>
                        Ajustar preferencias
                    </button>
                </div>

                <h3>Extra</h3>
                <label>
                    Idioma de la App
                    <select [(ngModel)]="idiomaApp">
                        <option>Español</option>
                        <option>Inglés</option>
                    </select>
                </label>
                <label>
                    Color de la App
                    <select [(ngModel)]="colorApp">
                        <option>Claro</option>
                        <option>Oscuro</option>
                    </select>
                </label>

                <h3>Privacidad y Seguridad</h3>
                <label>
                    Perfil visible
                    <input type="checkbox" [(ngModel)]="perfilVisible" />
                </label>
                <label>
                    Playlist Visibles
                    <input type="checkbox" [(ngModel)]="playlistVisible" />
                </label>
            </div>
        </section>

        <!-- Botón de guardar cambios -->
        <div class="save-section">
            <button class="btn btn-save" (click)="guardarCambios()">
                Guardar Cambios
            </button>
        </div>
    </main>
</div>

<!-- Overlay de cambio de contraseña -->
<div class="overlay" *ngIf="showPasswordOverlay()" (click)="closePasswordOverlay()">
    <div class="overlay-content" (click)="$event.stopPropagation()">
        <app-change-password 
            (close)="closePasswordOverlay()"
            (success)="onPasswordChangeSuccess()">
        </app-change-password>
    </div>
</div>

<!-- Overlay de preferencias musicales -->
<app-music-preferences
    *ngIf="showPreferencesOverlay()"
    (close)="closeMusicPreferences()"
    (preferencesUpdated)="onPreferencesUpdated()">
</app-music-preferences>