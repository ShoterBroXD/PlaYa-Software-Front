<div class="view-playlist-container" *ngIf="playlist">
  <div class="header">
    <button (click)="goBack()" class="btn secondary">← Volver</button>
    <h2>{{ playlist.name }}</h2>
    <button (click)="sharePlaylist()" class="btn primary">Compartir</button>
  </div>
  <p>{{ playlist.description || 'Sin descripción' }}</p>

  <div class="add-song" *ngIf="isOwner">
    <h3>Agregar Canción</h3>
    <form [formGroup]="addSongForm" (ngSubmit)="addSong()">
      <input type="number" formControlName="songId" placeholder="ID de la canción" class="form-control" />
      <button type="submit" [disabled]="addSongForm.invalid" class="btn primary">Agregar</button>
    </form>
  </div>

  <div class="songs-list">
    <h3>Canciones ({{ playlist.songs?.length || 0 }})</h3>
    <div *ngIf="playlist.songs?.length === 0">No hay canciones en esta playlist.</div>
    <div class="song-item" *ngFor="let song of playlist.songs">
      <img [src]="song.coverURL || '/assets/img/images/img-placeholder.svg'" [alt]="song.title" class="song-cover">
      <div class="song-info">
        <h4>{{ song.title }}</h4>
        <p>{{ song.description }}</p>
      </div>
      <div class="song-actions">
        <button *ngIf="isOwner" (click)="removeSong(song.idSong)" class="btn-icon" title="Remover canción">
          <img src="/assets/img/icons/icon_trash.svg" alt="Eliminar" />
        </button>
        <button class="btn-icon play-btn" (click)="playSong(song)" title="Reproducir">
          <img src="/assets/img/icons/icon_play.svg" alt="Play" style="width: 24px; height: 24px;" />
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="loading" class="loading">Cargando...</div>
<div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>